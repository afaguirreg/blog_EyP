// Include the libraries we need
#include <LiquidCrystal_PCF8574.h>

#include <ThingSpeak.h>
#include <ESP8266WiFi.h>

LiquidCrystal_PCF8574 lcd(0x27); // set the LCD address to 0x27 for a 16 chars and 2 line display

// Datos de red WiFi (modificar)
char ssid[] = "NOMBRE_RED_WIFI"; // Nombre de la red 
char pass[] = "CONTRASEÑA_RED_WIFI"; // Contraseña

int status = WL_IDLE_STATUS;
WiFiClient  client;

int sensorValue; // Variable para almacenar el valor leído por el sensor

// Informaciòn disponible en ThingSpeak:
unsigned long canal = 1234567;  // Número de canal ThingSpeak
const char * ClaveEscrituraAPI = "ABCDEFGHIJKLMNOP";  // Clave de escritura ThingSpeak

void setup() {
  WiFi.begin(ssid, pass); 
  ThingSpeak.begin(client);

  lcd.begin(20, 4); // initialize the lcd
  delay(200);
  lcd.setBacklight(255);
  lcd.print("Sensor:");
}

void loop() {
  // Lee el valor de la entrada en el pin analógico 0
  sensorValue = analogRead(A0);

  // Escribe en ThingSpeak: (número del canal, número del campo, valor, clave de escritura)
  ThingSpeak.writeField(canal, 1, sensorValue, ClaveEscrituraAPI);

  lcd.setCursor(8,0);
  lcd.print(sensorValue,1);
  lcd.print("   ");
  delay(1000);
}