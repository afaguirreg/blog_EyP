#define boton_izquierda A0
#define boton_derecha A1
#define boton_stop A2
#define salida_K1_PPAL_IZQ 8
#define salida_K2_PPAL_DER 9
#define salida_K3_ESTRELLA 10
#define salida_K4_TRIANGULO 11

#define estado_boton_izquierda digitalRead(boton_izquierda)
#define estado_boton_derecha digitalRead(boton_derecha)
#define estado_boton_stop digitalRead(boton_stop)
#define salida_K1_PPAL_IZQ_ON digitalWrite(salida_K1_PPAL_IZQ, HIGH)
#define salida_K1_PPAL_IZQ_OFF digitalWrite(salida_K1_PPAL_IZQ, LOW)
#define salida_K2_PPAL_DER_ON digitalWrite(salida_K2_PPAL_DER, HIGH)
#define salida_K2_PPAL_DER_OFF digitalWrite(salida_K2_PPAL_DER, LOW)
#define salida_K3_ESTRELLA_ON digitalWrite(salida_K3_ESTRELLA, HIGH)
#define salida_K3_ESTRELLA_OFF digitalWrite(salida_K3_ESTRELLA, LOW)
#define salida_K4_TRIANGULO_ON digitalWrite(salida_K4_TRIANGULO, HIGH)
#define salida_K4_TRIANGULO_OFF digitalWrite(salida_K4_TRIANGULO, LOW)

boolean estado_motor = 0;

void apagar() {
  estado_motor = 0;
  salida_K1_PPAL_IZQ_OFF;
  salida_K2_PPAL_DER_OFF;
  salida_K3_ESTRELLA_OFF;
  salida_K4_TRIANGULO_OFF;
}

void setup() {
  // put your setup code here, to run once:
  pinMode(boton_izquierda, INPUT);
  pinMode(boton_derecha, INPUT);
  pinMode(boton_stop, INPUT);
  pinMode(salida_K1_PPAL_IZQ, OUTPUT);
  pinMode(salida_K2_PPAL_DER, OUTPUT);
  pinMode(salida_K3_ESTRELLA, OUTPUT);
  pinMode(salida_K4_TRIANGULO, OUTPUT);
}

void loop() {
  // put your main code here, to run repeatedly:
  if (estado_boton_izquierda==1 && estado_boton_stop==0 && estado_motor==0)
  {
    estado_motor = 1;
    salida_K2_PPAL_DER_OFF;
    salida_K4_TRIANGULO_OFF;
    salida_K1_PPAL_IZQ_ON;
    salida_K3_ESTRELLA_ON;
    for (int i=0; i<1000;++i)
    {
      if (estado_boton_stop==1)
      {
        apagar();
        break;
      }
      delay(5);
    }
    salida_K3_ESTRELLA_OFF;
    salida_K4_TRIANGULO_ON;
  }

  //Programar acciÃ³n boton_derecha

  if (estado_boton_stop==1)
    apagar();
}
